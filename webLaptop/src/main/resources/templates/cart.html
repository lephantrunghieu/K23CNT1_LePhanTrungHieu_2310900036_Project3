<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Giỏ hàng</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">

<div th:replace="layout/fragments :: header"></div>

<div th:replace="layout/fragments :: slide"></div>

<div class="max-w-7xl mx-auto bg-white rounded shadow p-6 mt-12">

        <h1 class="text-3xl font-bold mb-6">Giỏ hàng</h1>

        <table class="w-full">
            <thead>
            <tr class="text-left border-b">
                <th class="p-2">Sản phẩm</th>
                <th class="p-2">Giá</th>
                <th class="p-2">Số lượng</th>
                <th class="p-2">Thành tiền</th>
                <th class="p-2"></th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="item : ${cartItems}" class="border-b">
                <td class="p-2 flex items-center gap-3">
                    <img th:src="@{${item.hinhanh}}" class="w-16 h-16 object-cover rounded">
                    <span th:text="${item.ten}"></span>
                </td>

                <td class="p-2 text-indigo-600 font-bold"
                    th:text="${#numbers.formatDecimal(item.gia, 0, 'POINT', 0, 'COMMA')} + ' VNĐ'"></td>

                <td class="p-2">
                    <form th:action="@{/cart/update/{id}(id=${item.id})}" method="get">
                        <input name="qty" type="number" min="1" th:value="${item.soluong}"
                               class="border w-16 p-1 text-center">
                        <button class="bg-blue-500 text-white px-3 py-1 rounded ml-2">OK</button>
                    </form>
                </td>

                <td class="p-2 font-bold"
                    th:text="${#numbers.formatDecimal(item.thanhTien, 0, 'POINT', 0, 'COMMA')} + ' VNĐ'"></td>

                <td class="p-2">
                    <a th:href="@{/cart/remove/{id}(id=${item.id})}"
                       class="text-red-500 font-semibold">Xóa</a>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="text-right mt-6 text-2xl font-bold">
            Tổng: <span th:text="${#numbers.formatDecimal(total, 0, 'POINT', 0, 'COMMA')} + ' VNĐ'"></span>
        </div>

        <div class="text-right mt-4">
            <a href="/cart/clear" class="bg-gray-500 text-white px-4 py-2 rounded">Xóa tất cả</a>
            <a href="/checkout" class="bg-green-600 text-white px-4 py-2 rounded ml-2">Thanh toán</a>
        </div>

</div>



<div th:replace="layout/fragments :: footer"></div>

<div th:replace="layout/fragments :: script"></div>

</body>
</html>
