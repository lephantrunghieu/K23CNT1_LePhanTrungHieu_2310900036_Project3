<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="${pageTitle}">Form Sản phẩm</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8 font-sans">
<div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-xl">
  <h1 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2" th:text="${pageTitle}">Form Sản phẩm</h1>

  <form th:action="@{/admin/maytinh/save}" method="post" enctype="multipart/form-data" th:object="${maytinh}" class="space-y-4">

    <input type="hidden" th:field="*{mamt}" />
    <input type="hidden" th:field="*{hinhanh}" />

    <div>
      <label for="tenmt" class="block text-sm font-medium text-gray-700">Tên Sản phẩm</label>
      <input type="text" th:field="*{tenmt}" id="tenmt" required
             class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
    </div>

    <div>
      <label for="hang" class="block text-sm font-medium text-gray-700">Hãng sản xuất</label>
      <select th:field="*{hang}" id="hang" required
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-white">
        <option th:each="h : ${listHang}"
                th:value="${h.mahang}"
                th:text="${h.tenhang}"
                th:selected="${maytinh.hang != null and maytinh.hang.mahang == h.mahang}">
          Hãng
        </option>
      </select>
    </div>

    <div>
      <label for="gia" class="block text-sm font-medium text-gray-700">Giá (VNĐ)</label>
      <input type="number" th:field="*{gia}" id="gia" required min="0"
             class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
    </div>

    <div>
      <label for="imageUpload" class="block text-sm font-medium text-gray-700">Ảnh Sản phẩm</label>
      <input type="file" id="imageUpload" name="imageUpload" accept="image/*"
             class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
      <p class="mt-1 text-xs text-gray-500">Chỉ chấp nhận định dạng ảnh (jpg, png, ...)</p>

      <div th:if="${maytinh.hinhanh != null and !maytinh.hinhanh.isEmpty()}" class="mt-2">
        <p class="text-sm text-gray-600">Ảnh hiện tại:</p>
        <img th:src="@{${maytinh.hinhanh}}" alt="Ảnh sản phẩm hiện tại" class="h-20 w-20 object-cover border rounded" />
      </div>
    </div>

    <div>
      <label for="mota" class="block text-sm font-medium text-gray-700">Mô tả</label>
      <textarea th:field="*{mota}" id="mota" rows="6"
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
      <p class="mt-1 text-xs text-gray-500">Mô tả chi tiết sản phẩm.</p>
    </div>

    <div class="pt-4 flex justify-end space-x-3">
      <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-200">
        Lưu Sản phẩm
      </button>
      <a th:href="@{/admin/maytinh}" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded transition duration-200">
        Hủy
      </a>
    </div>
  </form>
</div>
</body>
</html>